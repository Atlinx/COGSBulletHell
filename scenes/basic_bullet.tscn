[gd_scene load_steps=22 format=3 uid="uid://dpnx1vflldwg8"]

[ext_resource type="Script" path="res://scripts/projectiles/projectile.gd" id="1_rotpy"]
[ext_resource type="Texture2D" uid="uid://ps7et8igew4t" path="res://assets/art/fx/96_circle_fx.png" id="2_oa76v"]
[ext_resource type="Texture2D" uid="uid://dmqt0hfqq031m" path="res://assets/art/bullets/bullet_circle.png" id="2_vw743"]
[ext_resource type="Shader" path="res://assets/shaders/recolor.gdshader" id="3_4ep86"]
[ext_resource type="Script" path="res://scripts/projectiles/forward_projectile_move.gd" id="3_tcfjq"]
[ext_resource type="Script" path="res://scripts/entity/hit_detector/hit_detector.gd" id="3_tkndy"]
[ext_resource type="Script" path="res://scripts/entity/hit_detector/hit_applier/hit_once.gd" id="4_clnye"]
[ext_resource type="Script" path="res://scripts/projectiles/destroy.gd" id="4_ir47d"]
[ext_resource type="Script" path="res://scripts/entity/team.gd" id="7_golyg"]
[ext_resource type="Script" path="res://scripts/fx.gd" id="8_hfwct"]
[ext_resource type="Texture2D" uid="uid://b05q2b0cgv3rx" path="res://assets/art/fx/64_circle_fx.png" id="9_3fwu8"]
[ext_resource type="Script" path="res://scripts/projectiles/rotate_to_projectile.gd" id="11_pemwd"]
[ext_resource type="Script" path="res://scripts/projectiles/recolor_bullet.gd" id="13_36k0v"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_k3ubm"]
shader = ExtResource("3_4ep86")
shader_parameter/original_0 = Color(1, 0, 0, 1)
shader_parameter/original_1 = Color(0, 0, 0, 0)
shader_parameter/original_2 = Color(0, 0, 0, 0)
shader_parameter/original_3 = Color(0, 0, 0, 0)
shader_parameter/replace_0 = Color(1, 0, 0, 1)
shader_parameter/replace_1 = Color(0, 0, 0, 0)
shader_parameter/replace_2 = Color(0, 0, 0, 0)
shader_parameter/replace_3 = Color(0, 0, 0, 0)
shader_parameter/precision = 0.05

[sub_resource type="CircleShape2D" id="CircleShape2D_kj6p6"]
radius = 32.0

[sub_resource type="Curve" id="Curve_ihec5"]
_data = [Vector2(0.310502, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), -2.61586, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_6wcmg"]
curve = SubResource("Curve_ihec5")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_qihf0"]
particle_flag_disable_z = true
emission_shape = 6
emission_ring_axis = Vector3(0, 0, 1)
emission_ring_height = 1.0
emission_ring_radius = 1.0
emission_ring_inner_radius = 0.0
initial_velocity_min = 250.0
initial_velocity_max = 300.0
gravity = Vector3(0, 0, 0)
damping_min = 70.0
damping_max = 70.0
scale_curve = SubResource("CurveTexture_6wcmg")

[sub_resource type="Animation" id="Animation_1jx3a"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Glow:scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(1, 1)]
}

[sub_resource type="Animation" id="Animation_16bqd"]
resource_name = "glow"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Glow:scale")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(1.09724, 1.09724), Vector2(0.886442, 0.886442)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_nj4ax"]
_data = {
"RESET": SubResource("Animation_1jx3a"),
"glow": SubResource("Animation_16bqd")
}

[node name="BasicBullet" type="Node2D"]
script = ExtResource("1_rotpy")

[node name="Glow" type="Sprite2D" parent="."]
self_modulate = Color(1, 0, 0, 0.25)
texture = ExtResource("2_oa76v")

[node name="Visual" type="Sprite2D" parent="."]
material = SubResource("ShaderMaterial_k3ubm")
texture = ExtResource("2_vw743")

[node name="HitBox" type="Area2D" parent="." node_paths=PackedStringArray("entity")]
script = ExtResource("3_tkndy")
entity = NodePath("..")
detect_mode = 1

[node name="CollisionShape2D" type="CollisionShape2D" parent="HitBox"]
visible = false
shape = SubResource("CircleShape2D_kj6p6")

[node name="HitOnce" type="Node" parent="HitBox"]
script = ExtResource("4_clnye")
damage = 10

[node name="ForwardProjectileMove" type="Node" parent="."]
script = ExtResource("3_tcfjq")
speed = 1000.0

[node name="Destroy" type="Node2D" parent="."]
script = ExtResource("4_ir47d")
lifetime = 1.0

[node name="FX" type="Node2D" parent="Destroy"]
script = ExtResource("8_hfwct")
unparent_on_play = true
use_lifetime = true
lifetime = 2.0

[node name="GPUParticles2D" type="GPUParticles2D" parent="Destroy/FX"]
self_modulate = Color(1, 0, 0, 1)
rotation = 3.14159
emitting = false
amount = 3
process_material = SubResource("ParticleProcessMaterial_qihf0")
texture = ExtResource("9_3fwu8")
lifetime = 0.5
one_shot = true
explosiveness = 0.8

[node name="RotateToProjectile" type="Node" parent="Destroy/FX" node_paths=PackedStringArray("projectile")]
script = ExtResource("11_pemwd")
projectile = NodePath("../../..")

[node name="Team" type="Node" parent="."]
script = ExtResource("7_golyg")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_nj4ax")
}
autoplay = "glow"

[node name="RecolorBullet" type="Node" parent="." node_paths=PackedStringArray("visual", "glow", "particles")]
script = ExtResource("13_36k0v")
color = Color(1, 0, 0, 1)
visual = NodePath("../Visual")
glow = NodePath("../Glow")
particles = NodePath("../Destroy/FX/GPUParticles2D")

[connection signal="detector_entered" from="HitBox" to="Destroy" method="destroy" unbinds=1]
[connection signal="wall_entered" from="HitBox" to="Destroy" method="destroy" unbinds=1]
